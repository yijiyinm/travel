import{d as F,j as se,bd as he,S as ne,u as ie,a8 as q,b3 as ye,b as ue,f as l,a as d,c as S,k as N,Y as U,aA as Y,l as z,K as t,_ as de,be as we,U as Ce,aW as Se,p as ke,z as Ve,n as T,e as ae,aj as p,q as E,A as Q,af as Ee,s as De,v as Ne,bb as X,r as B,a7 as j,o as Ie,w as o,aa as re,aQ as xe,bc as $e,aV as Ae,P as Pe}from"./index-8950cb87.js";import{E as Ue,g as ze,f as Re,_ as Fe,a as Oe,b as Te,c as Be,d as je,e as qe,v as We}from"./search-7361b612.js";import{a as Ye,E as Le}from"./el-date-picker-52db678a.js";import{E as Me}from"./el-dialog-3401a13f.js";import"./el-tooltip-f30e8ab7.js";import"./el-scrollbar-577ad69f.js";import{E as K,a as Ke}from"./el-form-item-60eafdf9.js";import{_ as Qe}from"./_plugin-vue_export-helper-c27b6911.js";import"./refs-a598af0c.js";const G=Symbol("elDescriptions");var W=F({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:se(G,{})}},render(){var w,_,i,x,u,b;const s=he(this.cell),{border:D,direction:r}=this.descriptions,n=r==="vertical",v=((i=(_=(w=this.cell)==null?void 0:w.children)==null?void 0:_.label)==null?void 0:i.call(_))||s.label,c=(b=(u=(x=this.cell)==null?void 0:x.children)==null?void 0:u.default)==null?void 0:b.call(u),m=s.span,I=s.align?`is-${s.align}`:"",h=s.labelAlign?`is-${s.labelAlign}`:I,k=s.className,R=s.labelClassName,V={width:ne(s.width),minWidth:ne(s.minWidth)},g=ie("descriptions");switch(this.type){case"label":return q(this.tag,{style:V,class:[g.e("cell"),g.e("label"),g.is("bordered-label",D),g.is("vertical-label",n),h,R],colSpan:n?m:1},v);case"content":return q(this.tag,{style:V,class:[g.e("cell"),g.e("content"),g.is("bordered-content",D),g.is("vertical-content",n),I,k],colSpan:n?m:m*2-1},c);default:return q("td",{style:V,class:[g.e("cell"),I],colSpan:m},[ye(v)?void 0:q("span",{class:[g.e("label"),R]},v),q("span",{class:[g.e("content"),k]},c)])}}});const Xe=ue({row:{type:Array,default:()=>[]}}),Ge={key:1},He=F({name:"ElDescriptionsRow"}),Je=F({...He,props:Xe,setup(w){const _=se(G,{});return(i,x)=>l(_).direction==="vertical"?(d(),S(U,{key:0},[N("tr",null,[(d(!0),S(U,null,Y(i.row,(u,b)=>(d(),z(l(W),{key:`tr1-${b}`,cell:u,tag:"th",type:"label"},null,8,["cell"]))),128))]),N("tr",null,[(d(!0),S(U,null,Y(i.row,(u,b)=>(d(),z(l(W),{key:`tr2-${b}`,cell:u,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(d(),S("tr",Ge,[(d(!0),S(U,null,Y(i.row,(u,b)=>(d(),S(U,{key:`tr3-${b}`},[l(_).border?(d(),S(U,{key:0},[t(l(W),{cell:u,tag:"td",type:"label"},null,8,["cell"]),t(l(W),{cell:u,tag:"td",type:"content"},null,8,["cell"])],64)):(d(),z(l(W),{key:1,cell:u,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var Ze=de(Je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const et=ue({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:we,title:{type:String,default:""},extra:{type:String,default:""}}),tt=F({name:"ElDescriptions"}),lt=F({...tt,props:et,setup(w){const _=w,i=ie("descriptions"),x=Ce(),u=Se();ke(G,_);const b=Ve(()=>[i.b(),i.m(x.value)]),s=(r,n,v,c=!1)=>(r.props||(r.props={}),n>v&&(r.props.span=v),c&&(r.props.span=n),r),D=()=>{var r;const n=Ee((r=u.default)==null?void 0:r.call(u)).filter(h=>{var k;return((k=h==null?void 0:h.type)==null?void 0:k.name)==="ElDescriptionsItem"}),v=[];let c=[],m=_.column,I=0;return n.forEach((h,k)=>{var R;const V=((R=h.props)==null?void 0:R.span)||1;if(k<n.length-1&&(I+=V>m?m:V),k===n.length-1){const g=_.column-I%_.column;c.push(s(h,g,m,!0)),v.push(c);return}V<m?(m-=V,c.push(h)):(c.push(s(h,V,m)),v.push(c),m=_.column,c=[])}),v};return(r,n)=>(d(),S("div",{class:T(l(b))},[r.title||r.extra||r.$slots.title||r.$slots.extra?(d(),S("div",{key:0,class:T(l(i).e("header"))},[N("div",{class:T(l(i).e("title"))},[ae(r.$slots,"title",{},()=>[p(E(r.title),1)])],2),N("div",{class:T(l(i).e("extra"))},[ae(r.$slots,"extra",{},()=>[p(E(r.extra),1)])],2)],2)):Q("v-if",!0),N("div",{class:T(l(i).e("body"))},[N("table",{class:T([l(i).e("table"),l(i).is("bordered",r.border)])},[N("tbody",null,[(d(!0),S(U,null,Y(D(),(v,c)=>(d(),z(Ze,{key:c,row:v},null,8,["row"]))),128))])],2)],2)],2))}});var ot=de(lt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]),pe=F({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const nt=De(ot,{DescriptionsItem:pe}),at=Ne(pe);function rt(w){return X({url:"/order/getOrderList",method:"post",data:w})}function st(w){return X({url:"/order/orderRefund",method:"post",data:w})}function it(w){return X({url:"/order/getOrderDetailWX",method:"post",data:w})}const ut={class:"app-container"},dt={class:"search"},pt=["src"],ct={class:"dialog-footer"},mt={name:"order"},ft=F({...mt,setup(w){const _=B(K);let i=j({});const x=B(K),u=j({visible:!1}),b=B(!1),s=B(),D=B(0),r=j({visible:!1}),n=j({current:1,size:10}),v=j({refundAmount:[{required:!0,message:"请输入",trigger:"blur"}]}),c=B(),m={1:"待支付",2:"支付成功",3:"支付失败",4:"已全部退款",5:"部分退款",6:"退款申请中",7:"退款失败",8:"超时取消",9:"已经出行"};function I(f){const a={"1,5,6":"warning","2,4,9":"success","3,7":"error",8:"info"};for(const $ in a)if($.includes(f))return a[$]}function h(){b.value=!0,rt(n).then(({data:f})=>{c.value=f==null?void 0:f.records,D.value=f==null?void 0:f.total}).finally(()=>{b.value=!1})}function k(){_.value.resetFields(),n.current=1,h()}const R=(f,a,$)=>"￥"+$;function V(f){u.visible=!0,i.orderCode=f,i.refundAmount=null}function g(){x.value.validate(f=>{f&&st({orderCode:i.orderCode,refundAmount:i.refundAmount}).then(()=>{$e.success("操作成功"),i=j({}),u.visible=!1,k()})})}function ce(f){s.value={},r.visible=!0,r.title="详情",it({orderCode:f}).then(a=>{s.value=a==null?void 0:a.data})}function L(){r.visible=!1,u.visible=!1}return Ie(()=>{h()}),(f,a)=>{const $=Ae,A=Ke,M=ze,H=Re,me=Ye,fe=Fe,O=Pe,_e=Oe,J=K,y=Te,Z=Be,ee=je,be=qe,ge=Ue,P=at,te=nt,le=Me,ve=Le,oe=We;return d(),S("div",ut,[N("div",dt,[t(J,{ref_key:"queryFormRef",ref:_,model:l(n),inline:!0},{default:o(()=>[t(A,{prop:"orderCode",label:"订单编号"},{default:o(()=>[t($,{modelValue:l(n).orderCode,"onUpdate:modelValue":a[0]||(a[0]=e=>l(n).orderCode=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(A,{label:"订单状态",prop:"orderStatus"},{default:o(()=>[t(H,{modelValue:l(n).orderStatus,"onUpdate:modelValue":a[1]||(a[1]=e=>l(n).orderStatus=e),placeholder:"订单状态",clearable:""},{default:o(()=>[(d(),S(U,null,Y(m,(e,C)=>t(M,{key:C,label:e,value:C},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(A,{label:"是否分销商",prop:"distributionIs"},{default:o(()=>[t(H,{modelValue:l(n).distributionIs,"onUpdate:modelValue":a[2]||(a[2]=e=>l(n).distributionIs=e),placeholder:"是否分销商",clearable:""},{default:o(()=>[t(M,{value:!0,label:"是"}),t(M,{value:!1,label:"否"})]),_:1},8,["modelValue"])]),_:1}),t(A,{prop:"fxsCode",label:"分销商编码"},{default:o(()=>[t($,{modelValue:l(n).fxsCode,"onUpdate:modelValue":a[3]||(a[3]=e=>l(n).fxsCode=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(A,{prop:"fxsPhone",label:"分销商手机号"},{default:o(()=>[t($,{modelValue:l(n).fxsPhone,"onUpdate:modelValue":a[4]||(a[4]=e=>l(n).fxsPhone=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(A,{prop:"month",label:"日期"},{default:o(()=>[t(me,{modelValue:l(n).month,"onUpdate:modelValue":a[5]||(a[5]=e=>l(n).month=e),type:"month",placeholder:"请选择","value-format":"YYYY-MM"},null,8,["modelValue"])]),_:1}),t(A,null,{default:o(()=>[t(O,{type:"primary",onClick:h},{default:o(()=>[t(fe),p("搜索")]),_:1}),t(O,{onClick:k},{default:o(()=>[t(_e),p("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),t(ge,{shadow:"never"},{default:o(()=>[re((d(),z(ee,{ref:"dataTableRef",data:l(c),"highlight-current-row":"",selectable:"false",border:""},{default:o(()=>[t(y,{label:"订单编码",prop:"orderCode",width:"150"}),t(y,{label:"商品名称","min-width":"100","max-width":"200"},{default:o(e=>[N("img",{src:e.row.mainUrl},null,8,pt),p(" "+E(e.row.productName),1)]),_:1}),t(y,{label:"状态",width:"100"},{default:o(e=>[t(Z,{type:I(e.row.orderStatus)},{default:o(()=>[p(E(m[e.row.orderStatus]),1)]),_:2},1032,["type"])]),_:1}),t(y,{label:"出行时间",prop:"chuXingDate","min-width":"100"}),t(y,{label:"数量",prop:"num","min-width":"100"}),t(y,{label:"支付金额",prop:"payPrice","min-width":"100",formatter:R}),t(y,{label:"退款金额",prop:"refundAmount","min-width":"100"}),t(y,{label:"下单时间",prop:"createDate","min-width":"100"}),t(y,{label:"分销商编码",prop:"fxsCode","min-width":"100"}),t(y,{label:"分销商手机号",prop:"fxsPhone","min-width":"100"}),t(y,{fixed:"right",label:"操作",width:"220"},{default:o(e=>[t(O,{type:"primary",size:"small",link:"",onClick:C=>ce(e.row.orderCode)},{default:o(()=>[p(" 详情 ")]),_:2},1032,["onClick"]),"2,5,7".includes(e.row.orderStatus)?(d(),z(O,{key:0,type:"primary",size:"small",link:"",onClick:C=>V(e.row.orderCode)},{default:o(()=>[p(" 退款 ")]),_:2},1032,["onClick"])):Q("",!0)]),_:1})]),_:1},8,["data"])),[[oe,l(b)]]),l(D)>0?(d(),z(be,{key:0,total:l(D),"onUpdate:total":a[6]||(a[6]=e=>xe(D)?D.value=e:null),page:l(n).current,"onUpdate:page":a[7]||(a[7]=e=>l(n).current=e),limit:l(n).size,"onUpdate:limit":a[8]||(a[8]=e=>l(n).size=e),onPagination:h},null,8,["total","page","limit"])):Q("",!0)]),_:1}),t(le,{title:l(r).title,modelValue:l(r).visible,"onUpdate:modelValue":a[9]||(a[9]=e=>l(r).visible=e),width:"1000px",onClose:L},{default:o(()=>[t(te,{title:"订单详情",column:3},{default:o(()=>[t(P,{label:"订单状态"},{default:o(()=>{var e;return[t(Z,{type:I((e=l(s))==null?void 0:e.orderStatus)},{default:o(()=>{var C;return[p(E(m[(C=l(s))==null?void 0:C.orderStatus]),1)]}),_:1},8,["type"])]}),_:1}),t(P,{label:"产品数量"},{default:o(()=>{var e;return[p(E((e=l(s))==null?void 0:e.num),1)]}),_:1}),t(P,{label:"订单金额"},{default:o(()=>{var e;return[p(E((e=l(s))==null?void 0:e.payPrice),1)]}),_:1}),t(P,{label:"退款金额"},{default:o(()=>{var e;return[p(E(((e=l(s))==null?void 0:e.refundAmount)||"-"),1)]}),_:1}),t(P,{label:"商品Code"},{default:o(()=>{var e,C;return[p(E((C=(e=l(s))==null?void 0:e.productInfo)==null?void 0:C.productCode),1)]}),_:1}),t(P,{label:"商品名称"},{default:o(()=>{var e,C;return[p(E((C=(e=l(s))==null?void 0:e.productInfo)==null?void 0:C.productName),1)]}),_:1}),t(P,{label:"出行时间"},{default:o(()=>{var e;return[p(E((e=l(s))==null?void 0:e.chuXingDate),1)]}),_:1})]),_:1}),t(te,{title:"出行人信息"},{default:o(()=>[t(P,{label:"出行人信息",span:4},{default:o(()=>{var e;return[re((d(),z(ee,{ref:"dataTableRef",data:(e=l(s))==null?void 0:e.touristInfo,"highlight-current-row":"",selectable:"false"},{default:o(()=>[t(y,{label:"姓名",prop:"name"}),t(y,{label:"手机号",prop:"phone"}),t(y,{label:"身份证号",prop:"cardId"})]),_:1},8,["data"])),[[oe,l(b)]])]}),_:1})]),_:1})]),_:1},8,["title","modelValue"]),t(le,{title:"退款",modelValue:l(u).visible,"onUpdate:modelValue":a[11]||(a[11]=e=>l(u).visible=e),width:"350px",onClose:L},{footer:o(()=>[N("div",ct,[t(O,{type:"primary",onClick:g},{default:o(()=>[p("确定")]),_:1}),t(O,{onClick:L},{default:o(()=>[p("取消")]),_:1})])]),default:o(()=>[t(J,{model:l(i),ref_key:"refundFormRef",ref:x,"label-width":"80px",rules:l(v)},{default:o(()=>[t(A,{label:"退款金额",prop:"refundAmount"},{default:o(()=>[t(ve,{modelValue:l(i).refundAmount,"onUpdate:modelValue":a[10]||(a[10]=e=>l(i).refundAmount=e),"controls-position":"right",min:0,placeholder:"请输入",style:{width:"230px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});const kt=Qe(ft,[["__scopeId","data-v-599af8e4"]]);export{kt as default};

import{d as R,j as re,bd as ye,S as le,u as se,a8 as W,b3 as ve,b as ie,f as l,a as r,c as V,k as E,Y as z,aA as L,l as _,K as t,_ as ue,be as he,U as ge,aW as we,p as ke,z as Se,n as O,e as oe,aj as u,q as I,A as C,af as Ce,s as Ve,v as Ee,bb as M,r as Y,a7 as j,o as De,w as o,aa as ae,aQ as Ne,bc as xe,aV as Ie,P as $e}from "./index-9b9a7d02.js";import{E as Pe,g as Ae,f as Ue,_ as ze,a as Re,b as Fe,c as Be,d as Oe,e as Te,v as We}from "./search-1908dfd0.js";import{a as Ye,E as je}from "./el-date-picker-6979b5e2.js";import{E as qe}from "./el-dialog-31bf0290.js";import"./el-tooltip-3d728abb.js";import"./el-scrollbar-414fd0fb.js";import{E as ne,a as Le}from "./el-form-item-db6c4a7b.js";import{_ as Me}from "./_plugin-vue_export-helper-c27b6911.js";import"./refs-d618e8be.js";const K=Symbol("elDescriptions");var q=R({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:re(K,{})}},render(){var g,b,s,w,p,i;const c=ye(this.cell),{border:k,direction:n}=this.descriptions,y=n==="vertical",m=((s=(b=(g=this.cell)==null?void 0:g.children)==null?void 0:b.label)==null?void 0:s.call(b))||c.label,f=(i=(p=(w=this.cell)==null?void 0:w.children)==null?void 0:p.default)==null?void 0:i.call(p),v=c.span,$=c.align?`is-${c.align}`:"",S=c.labelAlign?`is-${c.labelAlign}`:$,D=c.className,x=c.labelClassName,d={width:le(c.width),minWidth:le(c.minWidth)},a=se("descriptions");switch(this.type){case"label":return W(this.tag,{style:d,class:[a.e("cell"),a.e("label"),a.is("bordered-label",k),a.is("vertical-label",y),S,x],colSpan:y?v:1},m);case"content":return W(this.tag,{style:d,class:[a.e("cell"),a.e("content"),a.is("bordered-content",k),a.is("vertical-content",y),$,D],colSpan:y?v:v*2-1},f);default:return W("td",{style:d,class:[a.e("cell"),$],colSpan:v},[ve(m)?void 0:W("span",{class:[a.e("label"),x]},m),W("span",{class:[a.e("content"),D]},f)])}}});const Ke=ie({row:{type:Array,default:()=>[]}}),Qe={key:1},Xe=R({name:"ElDescriptionsRow"}),Ge=R({...Xe,props:Ke,setup(g){const b=re(K,{});return(s, w)=>l(b).direction==="vertical"?(r(),V(z,{key:0},[E("tr",null,[(r(!0),V(z,null,L(s.row,(p, i)=>(r(),_(l(q),{key:`tr1-${i}`,cell:p,tag:"th",type:"label"},null,8,["cell"]))),128))]),E("tr",null,[(r(!0),V(z,null,L(s.row,(p, i)=>(r(),_(l(q),{key:`tr2-${i}`,cell:p,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(r(),V("tr",Qe,[(r(!0),V(z,null,L(s.row,(p, i)=>(r(),V(z,{key:`tr3-${i}`},[l(b).border?(r(),V(z,{key:0},[t(l(q),{cell:p,tag:"td",type:"label"},null,8,["cell"]),t(l(q),{cell:p,tag:"td",type:"content"},null,8,["cell"])],64)):(r(),_(l(q),{key:1,cell:p,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var He=ue(Ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const Je=ie({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:he,title:{type:String,default:""},extra:{type:String,default:""}}),Ze=R({name:"ElDescriptions"}),et=R({...Ze,props:Je,setup(g){const b=g,s=se("descriptions"),w=ge(),p=we();ke(K,b);const i=Se(()=>[s.b(),s.m(w.value)]),c=(n, y, m, f=!1)=>(n.props||(n.props={}),y>m&&(n.props.span=m),f&&(n.props.span=y),n),k=()=>{var n;const y=Ce((n=p.default)==null?void 0:n.call(p)).filter(S=>{var D;return((D=S==null?void 0:S.type)==null?void 0:D.name)==="ElDescriptionsItem"}),m=[];let f=[],v=b.column,$=0;return y.forEach((S, D)=>{var x;const d=((x=S.props)==null?void 0:x.span)||1;if(D<y.length-1&&($+=d>v?v:d),D===y.length-1){const a=b.column-$%b.column;f.push(c(S,a,v,!0)),m.push(f);return}d<v?(v-=d,f.push(S)):(f.push(c(S,d,v)),m.push(f),v=b.column,f=[])}),m};return(n, y)=>(r(),V("div",{class:O(l(i))},[n.title||n.extra||n.$slots.title||n.$slots.extra?(r(),V("div",{key:0,class:O(l(s).e("header"))},[E("div",{class:O(l(s).e("title"))},[oe(n.$slots,"title",{},()=>[u(I(n.title),1)])],2),E("div",{class:O(l(s).e("extra"))},[oe(n.$slots,"extra",{},()=>[u(I(n.extra),1)])],2)],2)):C("v-if",!0),E("div",{class:O(l(s).e("body"))},[E("table",{class:O([l(s).e("table"),l(s).is("bordered",n.border)])},[E("tbody",null,[(r(!0),V(z,null,L(k(),(m, f)=>(r(),_(He,{key:f,row:m},null,8,["row"]))),128))])],2)],2)],2))}});var tt=ue(et,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]),de=R({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const lt=Ve(tt,{DescriptionsItem:de}),ot=Ee(de);function at(g){return M({url:"/order/getOrderList",method:"post",data:g})}function nt(g){return M({url:"/order/orderRefund",method:"post",data:g})}function rt(g){return M({url:"/order/getOrderDetailWX",method:"post",data:g})}const st={class:"app-container"},it={class:"search"},ut=["src"],dt={class:"dialog-footer"},pt={name:"order"},ct=R({...pt,setup(g){const b=Y(ne);let s=j({});const w=j({visible:!1}),p=Y(!1),i=Y(),c=Y(0),k=j({visible:!1}),n=j({current:1,size:10}),y=Y();function m(){p.value=!0,at(n).then(({data:d})=>{y.value=d==null?void 0:d.records,c.value=d==null?void 0:d.total}).finally(()=>{p.value=!1})}function f(){b.value.resetFields(),n.current=1,m()}const v=(d, a, T)=>"￥"+T;function $(d){w.visible=!0,s.orderCode=d,s.refundAmount=null}function S(){nt({orderCode:s.orderCode,refundAmount:s.refundAmount}).then(()=>{xe.success("操作成功"),s=j({}),w.visible=!1,f()})}function D(d){i.value={},k.visible=!0,k.title="详情",rt({orderCode:d}).then(a=>{i.value=a==null?void 0:a.data})}function x(){k.visible=!1,w.visible=!1}return De(()=>{m()}),(d, a)=>{const T=Ie,P=Le,F=Ae,Q=Ue,pe=Ye,ce=ze,B=$e,me=Re,X=ne,h=Fe,A=Be,G=Oe,fe=Te,_e=Pe,U=ot,H=lt,J=qe,be=je,Z=We;return r(),V(z,null,[E("div",st,[E("div",it,[t(X,{ref_key:"queryFormRef",ref:b,model:l(n),inline:!0},{default:o(()=>[t(P,{prop:"orderCode",label:"订单编号"},{default:o(()=>[t(T,{modelValue:l(n).orderCode,"onUpdate:modelValue":a[0]||(a[0]= e=>l(n).orderCode=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(P,{label:"订单状态",prop:"orderStatus"},{default:o(()=>[t(Q,{modelValue:l(n).orderStatus,"onUpdate:modelValue":a[1]||(a[1]= e=>l(n).orderStatus=e),placeholder:"订单状态",clearable:""},{default:o(()=>[t(F,{value:1,label:"待支付"}),t(F,{value:2,label:"已支付"}),t(F,{value:3,label:"支付失败"}),t(F,{value:4,label:"已退款"})]),_:1},8,["modelValue"])]),_:1}),t(P,{label:"是否分销商",prop:"distributionIs"},{default:o(()=>[t(Q,{modelValue:l(n).distributionIs,"onUpdate:modelValue":a[2]||(a[2]= e=>l(n).distributionIs=e),placeholder:"是否分销商",clearable:""},{default:o(()=>[t(F,{value:!0,label:"是"}),t(F,{value:!1,label:"否"})]),_:1},8,["modelValue"])]),_:1}),t(P,{prop:"fxsCode",label:"分销商编码"},{default:o(()=>[t(T,{modelValue:l(n).fxsCode,"onUpdate:modelValue":a[3]||(a[3]= e=>l(n).fxsCode=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(P,{prop:"fxsPhone",label:"分销商手机号"},{default:o(()=>[t(T,{modelValue:l(n).fxsPhone,"onUpdate:modelValue":a[4]||(a[4]= e=>l(n).fxsPhone=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(P,{prop:"month",label:"日期"},{default:o(()=>[t(pe,{modelValue:l(n).month,"onUpdate:modelValue":a[5]||(a[5]= e=>l(n).month=e),type:"month",placeholder:"请选择","value-format":"YYYY-MM"},null,8,["modelValue"])]),_:1}),t(P,null,{default:o(()=>[t(B,{type:"primary",onClick:m},{default:o(()=>[t(ce),u("搜索")]),_:1}),t(B,{onClick:f},{default:o(()=>[t(me),u("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),t(_e,{shadow:"never"},{default:o(()=>[ae((r(),_(G,{ref:"dataTableRef",data:l(y),"highlight-current-row":"",selectable:"false",border:""},{default:o(()=>[t(h,{label:"订单编码",prop:"orderCode",width:"150"}),t(h,{label:"商品名称","min-width":"100","max-width":"200"},{default:o(e=>[E("img",{src:e.row.mainUrl},null,8,ut),u(" "+I(e.row.productName),1)]),_:1}),t(h,{label:"状态",width:"100"},{default:o(e=>[e.row.orderStatus===1?(r(),_(A,{key:0,type:"warning"},{default:o(()=>[u("待支付")]),_:1})):C("",!0),e.row.orderStatus===2?(r(),_(A,{key:1,type:"success"},{default:o(()=>[u("已支付")]),_:1})):C("",!0),e.row.orderStatus===3?(r(),_(A,{key:2,type:"info"},{default:o(()=>[u("支付失败")]),_:1})):C("",!0),e.row.orderStatus===4?(r(),_(A,{key:3,type:"info"},{default:o(()=>[u("已退款")]),_:1})):C("",!0)]),_:1}),t(h,{label:"出行时间",prop:"chuXingDate","min-width":"100"}),t(h,{label:"数量",prop:"num","min-width":"100"}),t(h,{label:"支付金额",prop:"payPrice","min-width":"100",formatter:v}),t(h,{label:"退款金额",prop:"refundAmount","min-width":"100"}),t(h,{label:"下单时间",prop:"createDate","min-width":"100"}),t(h,{label:"分销商编码",prop:"fxsCode","min-width":"100"}),t(h,{label:"分销商手机号",prop:"fxsPhone","min-width":"100"}),t(h,{fixed:"right",label:"操作",width:"220"},{default:o(e=>[t(B,{type:"primary",size:"small",link:"",onClick: N=>D(e.row.orderCode)},{default:o(()=>[u(" 详情 ")]),_:2},1032,["onClick"]),e.row.orderStatus===2?(r(),_(B,{key:0,type:"primary",size:"small",link:"",onClick: N=>$(e.row.orderCode)},{default:o(()=>[u(" 退款 ")]),_:2},1032,["onClick"])):C("",!0)]),_:1})]),_:1},8,["data"])),[[Z,l(p)]]),l(c)>0?(r(),_(fe,{key:0,total:l(c),"onUpdate:total":a[6]||(a[6]= e=>Ne(c)?c.value=e:null),page:l(n).current,"onUpdate:page":a[7]||(a[7]= e=>l(n).current=e),limit:l(n).size,"onUpdate:limit":a[8]||(a[8]= e=>l(n).size=e),onPagination:m},null,8,["total","page","limit"])):C("",!0)]),_:1}),t(J,{title:l(k).title,modelValue:l(k).visible,"onUpdate:modelValue":a[9]||(a[9]= e=>l(k).visible=e),width:"1000px",onClose:x},{default:o(()=>[t(H,{title:"订单详情",column:3},{default:o(()=>[t(U,{label:"订单状态"},{default:o(()=>{var e,N,ee,te;return[((e=l(i))==null?void 0:e.orderStatus)===1?(r(),_(A,{key:0,type:"warning"},{default:o(()=>[u("待支付")]),_:1})):C("",!0),((N=l(i))==null?void 0:N.orderStatus)===2?(r(),_(A,{key:1,type:"success"},{default:o(()=>[u("已支付")]),_:1})):C("",!0),((ee=l(i))==null?void 0:ee.orderStatus)===3?(r(),_(A,{key:2,type:"info"},{default:o(()=>[u("支付失败")]),_:1})):C("",!0),((te=l(i))==null?void 0:te.orderStatus)===4?(r(),_(A,{key:3,type:"info"},{default:o(()=>[u("已退款")]),_:1})):C("",!0)]}),_:1}),t(U,{label:"产品数量"},{default:o(()=>{var e;return[u(I((e=l(i))==null?void 0:e.num),1)]}),_:1}),t(U,{label:"订单金额"},{default:o(()=>{var e;return[u(I((e=l(i))==null?void 0:e.payPrice),1)]}),_:1}),t(U,{label:"退款金额"},{default:o(()=>{var e;return[u(I(((e=l(i))==null?void 0:e.refundAmount)||"-"),1)]}),_:1}),t(U,{label:"商品Code"},{default:o(()=>{var e,N;return[u(I((N=(e=l(i))==null?void 0:e.productInfo)==null?void 0:N.productCode),1)]}),_:1}),t(U,{label:"商品名称"},{default:o(()=>{var e,N;return[u(I((N=(e=l(i))==null?void 0:e.productInfo)==null?void 0:N.productName),1)]}),_:1}),t(U,{label:"出行时间"},{default:o(()=>{var e;return[u(I((e=l(i))==null?void 0:e.chuXingDate),1)]}),_:1})]),_:1}),t(H,{title:"出行人信息"},{default:o(()=>[t(U,{label:"出行人信息",span:4},{default:o(()=>{var e;return[ae((r(),_(G,{ref:"dataTableRef",data:(e=l(i))==null?void 0:e.touristInfo,"highlight-current-row":"",selectable:"false"},{default:o(()=>[t(h,{label:"姓名",prop:"name"}),t(h,{label:"手机号",prop:"phone"}),t(h,{label:"身份证号",prop:"cardId"})]),_:1},8,["data"])),[[Z,l(p)]])]}),_:1})]),_:1})]),_:1},8,["title","modelValue"])]),t(J,{title:"退款",modelValue:l(w).visible,"onUpdate:modelValue":a[11]||(a[11]= e=>l(w).visible=e),width:"350px",onClose:x},{footer:o(()=>[E("div",dt,[t(B,{type:"primary",onClick:S},{default:o(()=>[u("确定")]),_:1}),t(B,{onClick:x},{default:o(()=>[u("取消")]),_:1})])]),default:o(()=>[t(X,{model:l(s),"label-width":"80px"},{default:o(()=>[t(P,{label:"退款金额",prop:"refundAmount"},{default:o(()=>[t(be,{modelValue:l(s).refundAmount,"onUpdate:modelValue":a[10]||(a[10]= e=>l(s).refundAmount=e),"controls-position":"right",min:0,placeholder:"请输入",style:{width:"230px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});const kt=Me(ct,[["__scopeId","data-v-0345beff"]]);export{kt as default};

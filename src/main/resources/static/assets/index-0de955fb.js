import{d as j,r as m,a7 as c,o as O,a as f,c as G,k as V,K as e,w as o,f as l,aj as d,aa as H,l as v,A as D,aQ as J,aK as W,bc as B,P as X}from"./index-022b585c.js";import{E as Y,g as Z,f as ee,_ as te,a as oe,b as le,d as ne,e as ae,v as se}from"./search-46634472.js";import{E as ie}from"./el-dialog-9cfc5be9.js";import{E as re}from"./el-input-number-7718d45a.js";import"./el-tooltip-d39d5b03.js";import"./el-scrollbar-52146e5d.js";import{E as k,a as ue}from"./el-form-item-4ace8013.js";import{g as de,d as pe,u as _e}from"./index-51d3de5b.js";import{_ as me}from"./_plugin-vue_export-helper-c27b6911.js";import"./refs-790c65b0.js";const ce={class:"app-container"},fe={class:"search"},ye={class:"dialog-footer"},be={name:"distribution"},ve=j({...be,setup(xe){const C=m(k);let i=c({});const x=m(k),y=c({visible:!1}),p=m(!1),_=m(0),F=c({fxsSetDay:[{required:!0,message:"请输入",trigger:"blur"}]}),s=c({current:1,size:10}),E=m();function b(){p.value=!0,de(s).then(({data:a})=>{E.value=a==null?void 0:a.records,_.value=a==null?void 0:a.total}).finally(()=>{p.value=!1})}function U({openId:a}){W.confirm("确认作废该分销商吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{p.value=!0,pe({openId:a}).then(()=>{B.success("作废成功"),h()}).finally(()=>p.value=!1)})}function R({fxsSetDay:a,openId:n}){y.visible=!0,i.fxsSetDay=a,i.openId=n}function T(){x.value.validate(a=>{a&&_e({fxsSetDay:i.fxsSetDay,openId:i.openId}).then(()=>{B.success("操作成功"),g(),h()})})}function g(){y.visible=!1,x.value.clearValidate(),i=c({})}function h(){C.value.resetFields(),s.current=1,b()}return O(()=>{b()}),(a,n)=>{const S=Z,z=ee,w=ue,N=te,u=X,q=oe,I=k,r=le,L=ne,M=ae,P=Y,Q=re,A=ie,K=se;return f(),G("div",ce,[V("div",fe,[e(I,{ref_key:"queryFormRef",ref:C,model:l(s),inline:!0},{default:o(()=>[e(w,{label:"是否分销商",prop:"distributionIs"},{default:o(()=>[e(z,{modelValue:l(s).distributionIs,"onUpdate:modelValue":n[0]||(n[0]=t=>l(s).distributionIs=t),placeholder:"是否分销商",clearable:""},{default:o(()=>[e(S,{value:!0,label:"是"}),e(S,{value:!1,label:"否"})]),_:1},8,["modelValue"])]),_:1}),e(w,null,{default:o(()=>[e(u,{type:"primary",onClick:b},{default:o(()=>[e(N),d("搜索")]),_:1}),e(u,{onClick:h},{default:o(()=>[e(q),d("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),e(P,{shadow:"never"},{default:o(()=>[H((f(),v(L,{ref:"dataTableRef",data:l(E),"highlight-current-row":"",selectable:"false",border:""},{default:o(()=>[e(r,{label:"用户名",prop:"name",width:"150"}),e(r,{label:"openId",prop:"openId","min-width":"100"}),e(r,{label:"手机号",prop:"phone","min-width":"100"}),e(r,{label:"创建时间",prop:"createDate","min-width":"100"}),e(r,{label:"分销商编码",prop:"fxsCode","min-width":"100"}),e(r,{label:"分享天数",prop:"fxsSetDay","min-width":"100"}),e(r,{label:"操作",width:"220"},{default:o(t=>[t.row.fxsCode?(f(),v(u,{key:0,type:"primary",size:"small",link:"",onClick:$=>U({openId:t.row.openId})},{default:o(()=>[d(" 作废 ")]),_:2},1032,["onClick"])):D("",!0),t.row.fxsCode?(f(),v(u,{key:1,type:"primary",size:"small",link:"",onClick:$=>R({openId:t.row.openId,fxsSetDay:t.row.fxsSetDay})},{default:o(()=>[d(" 分享天数 ")]),_:2},1032,["onClick"])):D("",!0)]),_:1})]),_:1},8,["data"])),[[K,l(p)]]),l(_)>0?(f(),v(M,{key:0,total:l(_),"onUpdate:total":n[1]||(n[1]=t=>J(_)?_.value=t:null),page:l(s).current,"onUpdate:page":n[2]||(n[2]=t=>l(s).current=t),limit:l(s).size,"onUpdate:limit":n[3]||(n[3]=t=>l(s).size=t),onPagination:b},null,8,["total","page","limit"])):D("",!0)]),_:1}),e(A,{title:"退款",modelValue:l(y).visible,"onUpdate:modelValue":n[5]||(n[5]=t=>l(y).visible=t),width:"350px",onClose:g},{footer:o(()=>[V("div",ye,[e(u,{type:"primary",onClick:T},{default:o(()=>[d("确定")]),_:1}),e(u,{onClick:g},{default:o(()=>[d("取消")]),_:1})])]),default:o(()=>[e(I,{model:l(i),ref_key:"fxsSetDayFormRef",ref:x,"label-width":"80px","label-position":"top",rules:l(F)},{default:o(()=>[e(w,{label:"设置分销商分享天数",prop:"fxsSetDay"},{default:o(()=>[e(Q,{modelValue:l(i).fxsSetDay,"onUpdate:modelValue":n[4]||(n[4]=t=>l(i).fxsSetDay=t),"controls-position":"right",min:0,precision:0,step:1,placeholder:"请输入",style:{width:"230px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});const Be=me(ve,[["__scopeId","data-v-efd1d83a"]]);export{Be as default};

import{d as B,j as ie,bd as ge,S as ne,u as ue,a8 as L,b3 as he,b as de,f as l,a as i,c as V,k as x,Y as F,aA as K,l as _,K as t,_ as pe,be as we,U as ke,aW as Se,p as Ce,z as Ve,n as q,e as re,aj as d,q as $,A as C,af as Ee,s as De,v as Ne,bb as X,r as W,a7 as Y,o as xe,w as o,aa as se,aQ as Ie,bc as $e,aV as Ae,P as Pe}from"./index-55c99a09.js";import{E as Ue,g as ze,f as Re,_ as Fe,a as Be,b as Oe,c as Te,d as qe,e as We,v as Ye}from"./search-21d8e868.js";import{a as je,E as Le}from"./el-date-picker-be40c0b2.js";import{E as Me}from"./el-dialog-f81271cb.js";import"./el-tooltip-3cee8b18.js";import"./el-scrollbar-2ed8ff4c.js";import{E as Q,a as Ke}from"./el-form-item-8388244b.js";import{_ as Qe}from"./_plugin-vue_export-helper-c27b6911.js";import"./refs-82565155.js";const G=Symbol("elDescriptions");var M=B({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:ie(G,{})}},render(){var w,b,u,A,p,y;const r=ge(this.cell),{border:E,direction:s}=this.descriptions,a=s==="vertical",v=((u=(b=(w=this.cell)==null?void 0:w.children)==null?void 0:b.label)==null?void 0:u.call(b))||r.label,f=(y=(p=(A=this.cell)==null?void 0:A.children)==null?void 0:p.default)==null?void 0:y.call(p),c=r.span,I=r.align?`is-${r.align}`:"",k=r.labelAlign?`is-${r.labelAlign}`:I,D=r.className,R=r.labelClassName,S={width:ne(r.width),minWidth:ne(r.minWidth)},m=ue("descriptions");switch(this.type){case"label":return L(this.tag,{style:S,class:[m.e("cell"),m.e("label"),m.is("bordered-label",E),m.is("vertical-label",a),k,R],colSpan:a?c:1},v);case"content":return L(this.tag,{style:S,class:[m.e("cell"),m.e("content"),m.is("bordered-content",E),m.is("vertical-content",a),I,D],colSpan:a?c:c*2-1},f);default:return L("td",{style:S,class:[m.e("cell"),I],colSpan:c},[he(v)?void 0:L("span",{class:[m.e("label"),R]},v),L("span",{class:[m.e("content"),D]},f)])}}});const Xe=de({row:{type:Array,default:()=>[]}}),Ge={key:1},He=B({name:"ElDescriptionsRow"}),Je=B({...He,props:Xe,setup(w){const b=ie(G,{});return(u,A)=>l(b).direction==="vertical"?(i(),V(F,{key:0},[x("tr",null,[(i(!0),V(F,null,K(u.row,(p,y)=>(i(),_(l(M),{key:`tr1-${y}`,cell:p,tag:"th",type:"label"},null,8,["cell"]))),128))]),x("tr",null,[(i(!0),V(F,null,K(u.row,(p,y)=>(i(),_(l(M),{key:`tr2-${y}`,cell:p,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(i(),V("tr",Ge,[(i(!0),V(F,null,K(u.row,(p,y)=>(i(),V(F,{key:`tr3-${y}`},[l(b).border?(i(),V(F,{key:0},[t(l(M),{cell:p,tag:"td",type:"label"},null,8,["cell"]),t(l(M),{cell:p,tag:"td",type:"content"},null,8,["cell"])],64)):(i(),_(l(M),{key:1,cell:p,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var Ze=pe(Je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const et=de({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:we,title:{type:String,default:""},extra:{type:String,default:""}}),tt=B({name:"ElDescriptions"}),lt=B({...tt,props:et,setup(w){const b=w,u=ue("descriptions"),A=ke(),p=Se();Ce(G,b);const y=Ve(()=>[u.b(),u.m(A.value)]),r=(s,a,v,f=!1)=>(s.props||(s.props={}),a>v&&(s.props.span=v),f&&(s.props.span=a),s),E=()=>{var s;const a=Ee((s=p.default)==null?void 0:s.call(p)).filter(k=>{var D;return((D=k==null?void 0:k.type)==null?void 0:D.name)==="ElDescriptionsItem"}),v=[];let f=[],c=b.column,I=0;return a.forEach((k,D)=>{var R;const S=((R=k.props)==null?void 0:R.span)||1;if(D<a.length-1&&(I+=S>c?c:S),D===a.length-1){const m=b.column-I%b.column;f.push(r(k,m,c,!0)),v.push(f);return}S<c?(c-=S,f.push(k)):(f.push(r(k,S,c)),v.push(f),c=b.column,f=[])}),v};return(s,a)=>(i(),V("div",{class:q(l(y))},[s.title||s.extra||s.$slots.title||s.$slots.extra?(i(),V("div",{key:0,class:q(l(u).e("header"))},[x("div",{class:q(l(u).e("title"))},[re(s.$slots,"title",{},()=>[d($(s.title),1)])],2),x("div",{class:q(l(u).e("extra"))},[re(s.$slots,"extra",{},()=>[d($(s.extra),1)])],2)],2)):C("v-if",!0),x("div",{class:q(l(u).e("body"))},[x("table",{class:q([l(u).e("table"),l(u).is("bordered",s.border)])},[x("tbody",null,[(i(!0),V(F,null,K(E(),(v,f)=>(i(),_(Ze,{key:f,row:v},null,8,["row"]))),128))])],2)],2)],2))}});var ot=pe(lt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]),ce=B({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const at=De(ot,{DescriptionsItem:ce}),nt=Ne(ce);function rt(w){return X({url:"/order/getOrderList",method:"post",data:w})}function st(w){return X({url:"/order/orderRefund",method:"post",data:w})}function it(w){return X({url:"/order/getOrderDetailWX",method:"post",data:w})}const ut={class:"app-container"},dt={class:"search"},pt=["src"],ct={class:"dialog-footer"},mt={name:"order"},ft=B({...mt,setup(w){const b=W(Q);let u=Y({});const A=W(Q),p=Y({visible:!1}),y=W(!1),r=W(),E=W(0),s=Y({visible:!1}),a=Y({current:1,size:10}),v=Y({refundAmount:[{required:!0,message:"请输入",trigger:"blur"}]}),f=W();function c(){y.value=!0,rt(a).then(({data:g})=>{f.value=g==null?void 0:g.records,E.value=g==null?void 0:g.total}).finally(()=>{y.value=!1})}function I(){b.value.resetFields(),a.current=1,c()}const k=(g,n,j)=>"￥"+j;function D(g){p.visible=!0,u.orderCode=g,u.refundAmount=null}function R(){A.value.validate(g=>{g&&st({orderCode:u.orderCode,refundAmount:u.refundAmount}).then(()=>{$e.success("操作成功"),u=Y({}),p.visible=!1,I()})})}function S(g){r.value={},s.visible=!0,s.title="详情",it({orderCode:g}).then(n=>{r.value=n==null?void 0:n.data})}function m(){s.visible=!1,p.visible=!1}return xe(()=>{c()}),(g,n)=>{const j=Ae,P=Ke,O=ze,H=Re,me=je,fe=Fe,T=Pe,_e=Be,J=Q,h=Oe,U=Te,Z=qe,be=We,ye=Ue,z=nt,ee=at,te=Me,ve=Le,le=Ye;return i(),V("div",ut,[x("div",dt,[t(J,{ref_key:"queryFormRef",ref:b,model:l(a),inline:!0},{default:o(()=>[t(P,{prop:"orderCode",label:"订单编号"},{default:o(()=>[t(j,{modelValue:l(a).orderCode,"onUpdate:modelValue":n[0]||(n[0]=e=>l(a).orderCode=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(P,{label:"订单状态",prop:"orderStatus"},{default:o(()=>[t(H,{modelValue:l(a).orderStatus,"onUpdate:modelValue":n[1]||(n[1]=e=>l(a).orderStatus=e),placeholder:"订单状态",clearable:""},{default:o(()=>[t(O,{value:1,label:"待支付"}),t(O,{value:2,label:"已支付"}),t(O,{value:3,label:"支付失败"}),t(O,{value:4,label:"已退款"})]),_:1},8,["modelValue"])]),_:1}),t(P,{label:"是否分销商",prop:"distributionIs"},{default:o(()=>[t(H,{modelValue:l(a).distributionIs,"onUpdate:modelValue":n[2]||(n[2]=e=>l(a).distributionIs=e),placeholder:"是否分销商",clearable:""},{default:o(()=>[t(O,{value:!0,label:"是"}),t(O,{value:!1,label:"否"})]),_:1},8,["modelValue"])]),_:1}),t(P,{prop:"fxsCode",label:"分销商编码"},{default:o(()=>[t(j,{modelValue:l(a).fxsCode,"onUpdate:modelValue":n[3]||(n[3]=e=>l(a).fxsCode=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(P,{prop:"fxsPhone",label:"分销商手机号"},{default:o(()=>[t(j,{modelValue:l(a).fxsPhone,"onUpdate:modelValue":n[4]||(n[4]=e=>l(a).fxsPhone=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(P,{prop:"month",label:"日期"},{default:o(()=>[t(me,{modelValue:l(a).month,"onUpdate:modelValue":n[5]||(n[5]=e=>l(a).month=e),type:"month",placeholder:"请选择","value-format":"YYYY-MM"},null,8,["modelValue"])]),_:1}),t(P,null,{default:o(()=>[t(T,{type:"primary",onClick:c},{default:o(()=>[t(fe),d("搜索")]),_:1}),t(T,{onClick:I},{default:o(()=>[t(_e),d("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),t(ye,{shadow:"never"},{default:o(()=>[se((i(),_(Z,{ref:"dataTableRef",data:l(f),"highlight-current-row":"",selectable:"false",border:""},{default:o(()=>[t(h,{label:"订单编码",prop:"orderCode",width:"150"}),t(h,{label:"商品名称","min-width":"100","max-width":"200"},{default:o(e=>[x("img",{src:e.row.mainUrl},null,8,pt),d(" "+$(e.row.productName),1)]),_:1}),t(h,{label:"状态",width:"100"},{default:o(e=>[e.row.orderStatus===1?(i(),_(U,{key:0,type:"warning"},{default:o(()=>[d("待支付")]),_:1})):C("",!0),e.row.orderStatus===2?(i(),_(U,{key:1,type:"success"},{default:o(()=>[d("已支付")]),_:1})):C("",!0),e.row.orderStatus===3?(i(),_(U,{key:2,type:"info"},{default:o(()=>[d("支付失败")]),_:1})):C("",!0),e.row.orderStatus===4?(i(),_(U,{key:3,type:"info"},{default:o(()=>[d("已退款")]),_:1})):C("",!0)]),_:1}),t(h,{label:"出行时间",prop:"chuXingDate","min-width":"100"}),t(h,{label:"数量",prop:"num","min-width":"100"}),t(h,{label:"支付金额",prop:"payPrice","min-width":"100",formatter:k}),t(h,{label:"退款金额",prop:"refundAmount","min-width":"100"}),t(h,{label:"下单时间",prop:"createDate","min-width":"100"}),t(h,{label:"分销商编码",prop:"fxsCode","min-width":"100"}),t(h,{label:"分销商手机号",prop:"fxsPhone","min-width":"100"}),t(h,{fixed:"right",label:"操作",width:"220"},{default:o(e=>[t(T,{type:"primary",size:"small",link:"",onClick:N=>S(e.row.orderCode)},{default:o(()=>[d(" 详情 ")]),_:2},1032,["onClick"]),e.row.orderStatus===2?(i(),_(T,{key:0,type:"primary",size:"small",link:"",onClick:N=>D(e.row.orderCode)},{default:o(()=>[d(" 退款 ")]),_:2},1032,["onClick"])):C("",!0)]),_:1})]),_:1},8,["data"])),[[le,l(y)]]),l(E)>0?(i(),_(be,{key:0,total:l(E),"onUpdate:total":n[6]||(n[6]=e=>Ie(E)?E.value=e:null),page:l(a).current,"onUpdate:page":n[7]||(n[7]=e=>l(a).current=e),limit:l(a).size,"onUpdate:limit":n[8]||(n[8]=e=>l(a).size=e),onPagination:c},null,8,["total","page","limit"])):C("",!0)]),_:1}),t(te,{title:l(s).title,modelValue:l(s).visible,"onUpdate:modelValue":n[9]||(n[9]=e=>l(s).visible=e),width:"1000px",onClose:m},{default:o(()=>[t(ee,{title:"订单详情",column:3},{default:o(()=>[t(z,{label:"订单状态"},{default:o(()=>{var e,N,oe,ae;return[((e=l(r))==null?void 0:e.orderStatus)===1?(i(),_(U,{key:0,type:"warning"},{default:o(()=>[d("待支付")]),_:1})):C("",!0),((N=l(r))==null?void 0:N.orderStatus)===2?(i(),_(U,{key:1,type:"success"},{default:o(()=>[d("已支付")]),_:1})):C("",!0),((oe=l(r))==null?void 0:oe.orderStatus)===3?(i(),_(U,{key:2,type:"info"},{default:o(()=>[d("支付失败")]),_:1})):C("",!0),((ae=l(r))==null?void 0:ae.orderStatus)===4?(i(),_(U,{key:3,type:"info"},{default:o(()=>[d("已退款")]),_:1})):C("",!0)]}),_:1}),t(z,{label:"产品数量"},{default:o(()=>{var e;return[d($((e=l(r))==null?void 0:e.num),1)]}),_:1}),t(z,{label:"订单金额"},{default:o(()=>{var e;return[d($((e=l(r))==null?void 0:e.payPrice),1)]}),_:1}),t(z,{label:"退款金额"},{default:o(()=>{var e;return[d($(((e=l(r))==null?void 0:e.refundAmount)||"-"),1)]}),_:1}),t(z,{label:"商品Code"},{default:o(()=>{var e,N;return[d($((N=(e=l(r))==null?void 0:e.productInfo)==null?void 0:N.productCode),1)]}),_:1}),t(z,{label:"商品名称"},{default:o(()=>{var e,N;return[d($((N=(e=l(r))==null?void 0:e.productInfo)==null?void 0:N.productName),1)]}),_:1}),t(z,{label:"出行时间"},{default:o(()=>{var e;return[d($((e=l(r))==null?void 0:e.chuXingDate),1)]}),_:1})]),_:1}),t(ee,{title:"出行人信息"},{default:o(()=>[t(z,{label:"出行人信息",span:4},{default:o(()=>{var e;return[se((i(),_(Z,{ref:"dataTableRef",data:(e=l(r))==null?void 0:e.touristInfo,"highlight-current-row":"",selectable:"false"},{default:o(()=>[t(h,{label:"姓名",prop:"name"}),t(h,{label:"手机号",prop:"phone"}),t(h,{label:"身份证号",prop:"cardId"})]),_:1},8,["data"])),[[le,l(y)]])]}),_:1})]),_:1})]),_:1},8,["title","modelValue"]),t(te,{title:"退款",modelValue:l(p).visible,"onUpdate:modelValue":n[11]||(n[11]=e=>l(p).visible=e),width:"350px",onClose:m},{footer:o(()=>[x("div",ct,[t(T,{type:"primary",onClick:R},{default:o(()=>[d("确定")]),_:1}),t(T,{onClick:m},{default:o(()=>[d("取消")]),_:1})])]),default:o(()=>[t(J,{model:l(u),ref_key:"refundFormRef",ref:A,"label-width":"80px",rules:l(v)},{default:o(()=>[t(P,{label:"退款金额",prop:"refundAmount"},{default:o(()=>[t(ve,{modelValue:l(u).refundAmount,"onUpdate:modelValue":n[10]||(n[10]=e=>l(u).refundAmount=e),"controls-position":"right",min:0,placeholder:"请输入",style:{width:"230px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});const Ct=Qe(ft,[["__scopeId","data-v-3a2a0d66"]]);export{Ct as default};

import{d as I,aH as q,ay as B,r,o as F,a as K,c as R,K as s,w as i,k as c,f as o,au as z,X as D,aj as N,q as x,aV as T,P as U,aD as $,aE as j,aC as M}from"./index-5c1f092e.js";import{E as v,a as O}from"./el-form-item-ea9aae86.js";import{E as P}from"./el-tooltip-4edb80b9.js";import{S as g}from"./index-13cb6a9e.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";const H=d=>($("data-v-0dc28556"),d=d(),j(),d),L={class:"login-container"},Q=H(()=>c("div",{class:"flex text-white items-center py-4"},[c("span",{class:"text-2xl flex-1 text-center"},x("后台管理系统"))],-1)),X={class:"p-2 text-white"},Z={class:"p-2 text-white"},G=I({__name:"index",setup(d){const k=q(),V=B(),_=r(!1),h=r(!1),p=r(!1),w=r(v),n=r({username:"",password:""}),E={username:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur",validator:C}]};function C(t,e,a){e.length<6?a(new Error("The password can not be less than 6 digits")):a()}function S(t){const{key:e}=t;h.value=e&&e.length===1&&e>="A"&&e<="Z"}function y(){w.value.validate(t=>{t&&(_.value=!0,k.login(n.value).then(()=>{const e=V.query,a=e.redirect??"/",u=Object.keys(e).reduce((m,l)=>(l!=="redirect"&&(m[l]=e[l]),m),{});M.push({path:a,query:u})}).catch(()=>{}).finally(()=>{_.value=!1}))})}return F(()=>{}),(t,e)=>{const a=T,u=O,m=P,l=U,b=v;return K(),R("div",L,[s(b,{ref_key:"loginFormRef",ref:w,model:o(n),rules:E,class:"login-form"},{default:i(()=>[Q,s(u,{prop:"username"},{default:i(()=>[c("div",X,[s(g,{"icon-class":"user"})]),s(a,{class:"flex-1",ref:"username",size:"large",modelValue:o(n).username,"onUpdate:modelValue":e[0]||(e[0]=f=>o(n).username=f),placeholder:t.$t("login.username"),name:"username"},null,8,["modelValue","placeholder"])]),_:1}),s(m,{disabled:o(h)===!1,content:"Caps lock is On",placement:"right"},{default:i(()=>[s(u,{prop:"password"},{default:i(()=>[c("span",Z,[s(g,{"icon-class":"password"})]),s(a,{class:"flex-1",modelValue:o(n).password,"onUpdate:modelValue":e[1]||(e[1]=f=>o(n).password=f),placeholder:"密码",type:o(p)===!1?"password":"input",size:"large",name:"password",onKeyup:[S,z(y,["enter"])]},null,8,["modelValue","type","onKeyup"]),c("span",{class:"mr-2",onClick:e[2]||(e[2]=f=>p.value=!o(p))},[s(g,{"icon-class":o(p)===!1?"eye":"eye-open",class:"text-white cursor-pointer"},null,8,["icon-class"])])]),_:1})]),_:1},8,["disabled"]),s(l,{size:"default",loading:o(_),type:"primary",class:"w-full",onClick:D(y,["prevent"])},{default:i(()=>[N(x(t.$t("login.login")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["model"])])}}});const oe=A(G,[["__scopeId","data-v-0dc28556"]]);export{oe as default};

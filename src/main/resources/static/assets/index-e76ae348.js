import{d as U,j as te,bj as me,S as Z,u as le,a8 as T,a_ as fe,b as oe,f as l,a as r,c as V,k as N,Y as P,aA as j,l as b,K as t,_ as ae,aZ as _e,U as be,aW as ye,p as ge,z as ve,n as B,e as G,aj as c,q as z,A as E,af as he,s as we,v as Se,bh as M,r as A,a7 as H,o as ke,w as o,aa as J,aQ as Ce,aK as Ee,bi as Ve,aV as De,P as Ne}from"./index-0c202f84.js";import{E as xe,g as Ie,f as $e,_ as Pe,a as ze,b as Ue,c as Re,d as Be,e as Te,v as Ae}from"./search-17ecfb23.js";import{E as Fe}from"./el-dialog-eb3ebab2.js";import"./el-tooltip-485fde23.js";import"./el-scrollbar-02d9ccf2.js";import{E as ee,a as Oe}from"./el-form-item-cb36c870.js";import{E as je}from"./el-date-picker-47ade5f1.js";import{_ as Me}from"./_plugin-vue_export-helper-c27b6911.js";import"./refs-b7368a44.js";const W=Symbol("elDescriptions");var F=U({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:te(W,{})}},render(){var S,y,i,m,d,f;const n=me(this.cell),{border:$,direction:s}=this.descriptions,g=s==="vertical",h=((i=(y=(S=this.cell)==null?void 0:S.children)==null?void 0:y.label)==null?void 0:i.call(y))||n.label,v=(f=(d=(m=this.cell)==null?void 0:m.children)==null?void 0:d.default)==null?void 0:f.call(d),w=n.span,x=n.align?`is-${n.align}`:"",u=n.labelAlign?`is-${n.labelAlign}`:x,a=n.className,C=n.labelClassName,_={width:Z(n.width),minWidth:Z(n.minWidth)},p=le("descriptions");switch(this.type){case"label":return T(this.tag,{style:_,class:[p.e("cell"),p.e("label"),p.is("bordered-label",$),p.is("vertical-label",g),u,C],colSpan:g?w:1},h);case"content":return T(this.tag,{style:_,class:[p.e("cell"),p.e("content"),p.is("bordered-content",$),p.is("vertical-content",g),x,a],colSpan:g?w:w*2-1},v);default:return T("td",{style:_,class:[p.e("cell"),x],colSpan:w},[fe(h)?void 0:T("span",{class:[p.e("label"),C]},h),T("span",{class:[p.e("content"),a]},v)])}}});const We=oe({row:{type:Array,default:()=>[]}}),Ye={key:1},qe=U({name:"ElDescriptionsRow"}),Ke=U({...qe,props:We,setup(S){const y=te(W,{});return(i,m)=>l(y).direction==="vertical"?(r(),V(P,{key:0},[N("tr",null,[(r(!0),V(P,null,j(i.row,(d,f)=>(r(),b(l(F),{key:`tr1-${f}`,cell:d,tag:"th",type:"label"},null,8,["cell"]))),128))]),N("tr",null,[(r(!0),V(P,null,j(i.row,(d,f)=>(r(),b(l(F),{key:`tr2-${f}`,cell:d,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(r(),V("tr",Ye,[(r(!0),V(P,null,j(i.row,(d,f)=>(r(),V(P,{key:`tr3-${f}`},[l(y).border?(r(),V(P,{key:0},[t(l(F),{cell:d,tag:"td",type:"label"},null,8,["cell"]),t(l(F),{cell:d,tag:"td",type:"content"},null,8,["cell"])],64)):(r(),b(l(F),{key:1,cell:d,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var Le=ae(Ke,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const Qe=oe({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:_e,title:{type:String,default:""},extra:{type:String,default:""}}),Xe=U({name:"ElDescriptions"}),Ze=U({...Xe,props:Qe,setup(S){const y=S,i=le("descriptions"),m=be(),d=ye();ge(W,y);const f=ve(()=>[i.b(),i.m(m.value)]),n=(s,g,h,v=!1)=>(s.props||(s.props={}),g>h&&(s.props.span=h),v&&(s.props.span=g),s),$=()=>{var s;const g=he((s=d.default)==null?void 0:s.call(d)).filter(u=>{var a;return((a=u==null?void 0:u.type)==null?void 0:a.name)==="ElDescriptionsItem"}),h=[];let v=[],w=y.column,x=0;return g.forEach((u,a)=>{var C;const _=((C=u.props)==null?void 0:C.span)||1;if(a<g.length-1&&(x+=_>w?w:_),a===g.length-1){const p=y.column-x%y.column;v.push(n(u,p,w,!0)),h.push(v);return}_<w?(w-=_,v.push(u)):(v.push(n(u,_,w)),h.push(v),w=y.column,v=[])}),h};return(s,g)=>(r(),V("div",{class:B(l(f))},[s.title||s.extra||s.$slots.title||s.$slots.extra?(r(),V("div",{key:0,class:B(l(i).e("header"))},[N("div",{class:B(l(i).e("title"))},[G(s.$slots,"title",{},()=>[c(z(s.title),1)])],2),N("div",{class:B(l(i).e("extra"))},[G(s.$slots,"extra",{},()=>[c(z(s.extra),1)])],2)],2)):E("v-if",!0),N("div",{class:B(l(i).e("body"))},[N("table",{class:B([l(i).e("table"),l(i).is("bordered",s.border)])},[N("tbody",null,[(r(!0),V(P,null,j($(),(h,v)=>(r(),b(Le,{key:v,row:h},null,8,["row"]))),128))])],2)],2)],2))}});var Ge=ae(Ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]),ne=U({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const He=we(Ge,{DescriptionsItem:ne}),Je=Se(ne);function et(S){return M({url:"/order/getOrderList",method:"post",data:S})}function tt(S){return M({url:"/order/orderRefund",method:"post",data:S})}function lt(S){return M({url:"/order/getOrderDetailWX",method:"post",data:S})}const ot={class:"app-container"},at={class:"search"},nt=["src"],rt={name:"order"},st=U({...rt,setup(S){const y=A(ee),i=A(!1),m=A(),d=A(0),f=H({visible:!1}),n=H({current:1,size:10}),$=A();function s(){i.value=!0,et(n).then(({data:u})=>{$.value=u==null?void 0:u.records,d.value=u==null?void 0:u.total}).finally(()=>{i.value=!1})}function g(){y.value.resetFields(),n.current=1,s()}const h=(u,a,C)=>"￥"+C;function v({orderCode:u}){Ee.confirm("确定修改订单状态为已退款吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{i.value=!0,tt({orderCode:u}).then(()=>{Ve.success("操作成功"),g()}).finally(()=>i.value=!1)})}function w(u){m.value={},f.visible=!0,f.title="详情",lt({orderCode:u}).then(a=>{m.value=a==null?void 0:a.data})}function x(){f.visible=!1}return ke(()=>{s()}),(u,a)=>{const C=De,_=Oe,p=Ie,Y=$e,re=je,se=Pe,O=Ne,ie=ze,ue=ee,k=Ue,I=Re,q=Be,de=Te,pe=xe,R=Je,K=He,ce=Fe,L=Ae;return r(),V("div",ot,[N("div",at,[t(ue,{ref_key:"queryFormRef",ref:y,model:l(n),inline:!0},{default:o(()=>[t(_,{prop:"orderCode",label:"订单编号"},{default:o(()=>[t(C,{modelValue:l(n).orderCode,"onUpdate:modelValue":a[0]||(a[0]=e=>l(n).orderCode=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(_,{label:"订单状态",prop:"orderStatus"},{default:o(()=>[t(Y,{modelValue:l(n).orderStatus,"onUpdate:modelValue":a[1]||(a[1]=e=>l(n).orderStatus=e),placeholder:"订单状态",clearable:""},{default:o(()=>[t(p,{value:1,label:"待支付"}),t(p,{value:2,label:"已支付"}),t(p,{value:3,label:"支付失败"}),t(p,{value:4,label:"已退款"})]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"是否分销商",prop:"distributionIs"},{default:o(()=>[t(Y,{modelValue:l(n).distributionIs,"onUpdate:modelValue":a[2]||(a[2]=e=>l(n).distributionIs=e),placeholder:"是否分销商",clearable:""},{default:o(()=>[t(p,{value:!0,label:"是"}),t(p,{value:!1,label:"否"})]),_:1},8,["modelValue"])]),_:1}),t(_,{prop:"fxsCode",label:"分销商编码"},{default:o(()=>[t(C,{modelValue:l(n).fxsCode,"onUpdate:modelValue":a[3]||(a[3]=e=>l(n).fxsCode=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(_,{prop:"fxsPhone",label:"分销商手机号"},{default:o(()=>[t(C,{modelValue:l(n).fxsPhone,"onUpdate:modelValue":a[4]||(a[4]=e=>l(n).fxsPhone=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),t(_,{prop:"month",label:"日期"},{default:o(()=>[t(re,{modelValue:l(n).month,"onUpdate:modelValue":a[5]||(a[5]=e=>l(n).month=e),type:"month",placeholder:"请选择","value-format":"YYYY-MM"},null,8,["modelValue"])]),_:1}),t(_,null,{default:o(()=>[t(O,{type:"primary",onClick:s},{default:o(()=>[t(se),c("搜索")]),_:1}),t(O,{onClick:g},{default:o(()=>[t(ie),c("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),t(pe,{shadow:"never"},{default:o(()=>[J((r(),b(q,{ref:"dataTableRef",data:l($),"highlight-current-row":"",selectable:"false",border:""},{default:o(()=>[t(k,{label:"订单编码",prop:"orderCode",width:"150"}),t(k,{label:"商品名称","min-width":"100","max-width":"200"},{default:o(e=>[N("img",{src:e.row.mainUrl},null,8,nt),c(" "+z(e.row.productName),1)]),_:1}),t(k,{label:"状态",width:"100"},{default:o(e=>[e.row.orderStatus===1?(r(),b(I,{key:0,type:"warning"},{default:o(()=>[c("待支付")]),_:1})):E("",!0),e.row.orderStatus===2?(r(),b(I,{key:1,type:"success"},{default:o(()=>[c("已支付")]),_:1})):E("",!0),e.row.orderStatus===3?(r(),b(I,{key:2,type:"info"},{default:o(()=>[c("支付失败")]),_:1})):E("",!0),e.row.orderStatus===4?(r(),b(I,{key:3,type:"info"},{default:o(()=>[c("已退款")]),_:1})):E("",!0)]),_:1}),t(k,{label:"下单时间",prop:"createDate","min-width":"100"}),t(k,{label:"数量",prop:"num","min-width":"100"}),t(k,{label:"支付金额",prop:"payPrice","min-width":"100",formatter:h}),t(k,{label:"分销商编码",prop:"fxsCode","min-width":"100"}),t(k,{label:"分销商手机号",prop:"fxsPhone","min-width":"100"}),t(k,{fixed:"right",label:"操作",width:"220"},{default:o(e=>[t(O,{type:"primary",size:"small",link:"",onClick:D=>w(e.row.orderCode)},{default:o(()=>[c(" 详情 ")]),_:2},1032,["onClick"]),e.row.orderStatus===2?(r(),b(O,{key:0,type:"primary",size:"small",link:"",onClick:D=>v({orderCode:e.row.orderCode})},{default:o(()=>[c(" 退款 ")]),_:2},1032,["onClick"])):E("",!0)]),_:1})]),_:1},8,["data"])),[[L,l(i)]]),l(d)>0?(r(),b(de,{key:0,total:l(d),"onUpdate:total":a[6]||(a[6]=e=>Ce(d)?d.value=e:null),page:l(n).current,"onUpdate:page":a[7]||(a[7]=e=>l(n).current=e),limit:l(n).size,"onUpdate:limit":a[8]||(a[8]=e=>l(n).size=e),onPagination:s},null,8,["total","page","limit"])):E("",!0)]),_:1}),t(ce,{title:l(f).title,modelValue:l(f).visible,"onUpdate:modelValue":a[9]||(a[9]=e=>l(f).visible=e),width:"1000px",onClose:x},{default:o(()=>[t(K,{title:"订单详情",column:3},{default:o(()=>[t(R,{label:"订单状态"},{default:o(()=>{var e,D,Q,X;return[((e=l(m))==null?void 0:e.orderStatus)===1?(r(),b(I,{key:0,type:"warning"},{default:o(()=>[c("待支付")]),_:1})):E("",!0),((D=l(m))==null?void 0:D.orderStatus)===2?(r(),b(I,{key:1,type:"success"},{default:o(()=>[c("已支付")]),_:1})):E("",!0),((Q=l(m))==null?void 0:Q.orderStatus)===3?(r(),b(I,{key:2,type:"info"},{default:o(()=>[c("支付失败")]),_:1})):E("",!0),((X=l(m))==null?void 0:X.orderStatus)===4?(r(),b(I,{key:3,type:"info"},{default:o(()=>[c("已退款")]),_:1})):E("",!0)]}),_:1}),t(R,{label:"产品数量"},{default:o(()=>{var e;return[c(z((e=l(m))==null?void 0:e.num),1)]}),_:1}),t(R,{label:"订单金额"},{default:o(()=>{var e;return[c(z((e=l(m))==null?void 0:e.payPrice),1)]}),_:1}),t(R,{label:"商品Code"},{default:o(()=>{var e,D;return[c(z((D=(e=l(m))==null?void 0:e.productInfo)==null?void 0:D.productCode),1)]}),_:1}),t(R,{label:"商品名称"},{default:o(()=>{var e,D;return[c(z((D=(e=l(m))==null?void 0:e.productInfo)==null?void 0:D.productName),1)]}),_:1})]),_:1}),t(K,{title:"出行人信息"},{default:o(()=>[t(R,{label:"出行人信息",span:4},{default:o(()=>{var e;return[J((r(),b(q,{ref:"dataTableRef",data:(e=l(m))==null?void 0:e.touristInfo,"highlight-current-row":"",selectable:"false"},{default:o(()=>[t(k,{label:"姓名",prop:"name"}),t(k,{label:"手机号",prop:"phone"}),t(k,{label:"身份证号",prop:"cardId"})]),_:1},8,["data"])),[[L,l(i)]])]}),_:1})]),_:1})]),_:1},8,["title","modelValue"])])}}});const yt=Me(st,[["__scopeId","data-v-eea4d225"]]);export{yt as default};
